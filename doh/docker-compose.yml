#

version: '3'

services:

  unbound:
    build: { dockerfile: "Dockerfile.unbound" }
    volumes:
      - "./unbound.conf:/etc/unbound/conf.d/unbound.conf:ro"
    logging:
      options: { max-size: "1m" }

  proxy:
    build: "./dns-over-https"
    depends_on: [ "unbound" ]
    ports:
      - 127.0.0.1:8053:8053
    volumes:
      - "./dns-over-https/doh-server.conf:/doh-server.conf:ro"
    logging:
      options: { max-size: "1m" }
